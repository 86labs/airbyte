{
  "documentationUrl": "https://docs.airbyte.io/integrations/destinations/azureblobstorage",
  "supportsIncremental": true,
  "supportsNormalization": false,
  "supportsDBT": false,
  "supported_destination_sync_modes": ["overwrite", "append"],
  "connectionSpecification": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "AzureBlobStorage Destination Spec",
    "type": "object",
    "required": [
      "azure_blob_storage_account_name",
      "azure_blob_storage_account_key",
      "format"
    ],
    "additionalProperties": false,
    "properties": {
      "azure_blob_storage_endpoint_domain_name": {
        "title": "Endpoint Domain Name",
        "type": "string",
        "default": "blob.core.windows.net",
        "description": "This is Azure Blob Storage endpoint domain name. Leave default value (or leave it empty if run container from command line) to use Microsoft native from example.",
        "examples": ["blob.core.windows.net"]
      },
      "azure_blob_storage_container_name": {
        "title": "Azure blob storage container (Bucket) Name",
        "type": "string",
        "description": "The name of the Azure blob storage container. If not exists - will be created automatically. May be empty, then will be created automatically airbytecontainer+timestamp",
        "examples": ["airbytetescontainername"]
      },
      "azure_blob_storage_account_name": {
        "title": "Azure Blob Storage account name",
        "type": "string",
        "description": "The account's name of the Azure Blob Storage.",
        "examples": ["airbyte5storage"]
      },
      "azure_blob_storage_account_key": {
        "description": "The Azure blob storage account key.",
        "airbyte_secret": true,
        "type": "string",
        "examples": [
          "Z8ZkZpteggFx394vm+PJHnGTvdRncaYS+JhLKdj789YNmD+iyGTnG+PV+POiuYNhBg/ACS+LKjd%4FG3FHGN12Nd=="
        ]
      },
      "format": {
        "title": "Output Format",
        "type": "object",
        "description": "Output data format",
        "oneOf": [
          {
            "title": "CSV: Comma-Separated Values",
            "required": ["format_type", "flattening"],
            "properties": {
              "format_type": {
                "type": "string",
                "const": "CSV"
              },
              "flattening": {
                "type": "string",
                "title": "Normalization (Flattening)",
                "description": "Whether the input json data should be normalized (flattened) in the output CSV. Please refer to docs for details.",
                "default": "No flattening",
                "enum": ["No flattening", "Root level flattening"]
              }
            }
          },
          {
            "title": "JSON Lines: newline-delimited JSON",
            "required": ["format_type"],
            "properties": {
              "format_type": {
                "type": "string",
                "const": "JSONL"
              }
            }
          }
        ]
      },
      "loading_method": {
        "type": "object",
        "title": "Loading Method",
        "description": "Loading method used to send select the way data will be uploaded to Azure Blob Storage.",
        "oneOf": [
          {
            "title": "Standard Inserts",
            "additionalProperties": false,
            "description": "Direct uploading using streams.",
            "required": ["method"],
            "properties": {
              "method": {
                "type": "string",
                "const": "Standard"
              }
            }
          },
          {
            "title": "GCS Staging",
            "additionalProperties": false,
            "description": "Writes large batches of records to a file, uploads the file to GCS, then uses <pre>COPY INTO table</pre> to upload the file. Recommended for large production workloads for better speed and scalability.",
            "required": [
              "method",
              "gcs_bucket_name",
              "gcs_bucket_path",
              "gcs_bucket_region",
              "credential"
            ],
            "properties": {
              "method": {
                "type": "string",
                "const": "GCS Staging"
              },
              "gcs_bucket_name": {
                "title": "GCS Bucket Name",
                "type": "string",
                "description": "The name of the GCS bucket.",
                "examples": ["airbyte_sync"]
              },
              "gcs_bucket_path": {
                "description": "Directory under the GCS bucket where data will be written.",
                "type": "string",
                "examples": ["data_sync/test"]
              },
              "gcs_bucket_region": {
                "title": "GCS Bucket Region",
                "type": "string",
                "default": "",
                "description": "The region of the GCS bucket.",
                "enum": [
                  "",
                  "-- North America --",
                  "northamerica-northeast1",
                  "northamerica-northeast2",
                  "us-central1",
                  "us-east1",
                  "us-east4",
                  "us-west1",
                  "us-west2",
                  "us-west3",
                  "us-west4",
                  "-- South America --",
                  "southamerica-east1",
                  "southamerica-west1",
                  "-- Europe --",
                  "europe-central2",
                  "europe-north1",
                  "europe-west1",
                  "europe-west2",
                  "europe-west3",
                  "europe-west4",
                  "europe-west6",
                  "-- Asia --",
                  "asia-east1",
                  "asia-east2",
                  "asia-northeast1",
                  "asia-northeast2",
                  "asia-northeast3",
                  "asia-south1",
                  "asia-south2",
                  "asia-southeast1",
                  "asia-southeast2",
                  "-- Australia --",
                  "australia-southeast1",
                  "australia-southeast2",
                  "-- Multi-regions --",
                  "asia",
                  "eu",
                  "us",
                  "-- Dual-regions --",
                  "asia1",
                  "eur4",
                  "nam4"
                ]
              },
              "keep_files_in_gcs-bucket": {
                "type": "string",
                "description": "This upload method is supposed to temporary store records in GCS bucket. What do you want to do with data in GCS bucket when migration has finished?",
                "title": "GCS tmp files afterward processing",
                "default": "Delete all tmp files from GCS",
                "enum": [
                  "Delete all tmp files from GCS",
                  "Keep all tmp files in GCS"
                ]
              },
              "credential": {
                "title": "Credential",
                "type": "object",
                "oneOf": [
                  {
                    "title": "HMAC key",
                    "required": [
                      "credential_type",
                      "hmac_key_access_id",
                      "hmac_key_secret"
                    ],
                    "properties": {
                      "credential_type": {
                        "type": "string",
                        "const": "HMAC_KEY"
                      },
                      "hmac_key_access_id": {
                        "type": "string",
                        "description": "HMAC key access ID. When linked to a service account, this ID is 61 characters long; when linked to a user account, it is 24 characters long.",
                        "title": "HMAC Key Access ID",
                        "airbyte_secret": true,
                        "examples": ["1234567890abcdefghij1234"]
                      },
                      "hmac_key_secret": {
                        "type": "string",
                        "description": "The corresponding secret for the access ID. It is a 40-character base-64 encoded string.",
                        "title": "HMAC Key Secret",
                        "airbyte_secret": true,
                        "examples": ["1234567890abcdefghij1234567890ABCDEFGHIJ"]
                      }
                    }
                  }
                ]
              }
            }
          }
        ]
      }
    }
  }
}
